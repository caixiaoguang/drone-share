(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a1c23dd"],{6370:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register-container app-container"},[a("el-form",{ref:"form",staticClass:"register-form shadow-container",attrs:{"label-width":"120px",size:"small",model:t.form,rules:t.rules,"status-icon":""}},[a("div",{staticClass:"page-nav"},[a("span",[a("i",{staticClass:"el-icon-info"}),t._v("用户信息\n      ")]),t._v(" "),a("el-button",{staticClass:"edit-btn",attrs:{size:"mini",icon:"el-icon-edit",type:"primary"},on:{click:function(e){return t.bindCompany(!0)}}})],1),t._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[t.isEditObj["username"]?[a("el-input",{attrs:{placeholder:"请输入用户名"},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}}),t._v(" "),a("span",{staticClass:"input-tips"},[t._v("3到10个字符")])]:[a("span",[t._v(t._s(t.form.username))])]],2),t._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"5px"},attrs:{label:"联系方式",prop:"contact"}},[t.isEditObj["contact"]?[a("el-input",{attrs:{placeholder:"邮箱或者手机号"},model:{value:t.form.contact,callback:function(e){t.$set(t.form,"contact",e)},expression:"form.contact"}})]:[a("span",[t._v(t._s(t.form.contact))])]],2),t._v(" "),[a("el-form-item",{attrs:{label:"公司名称",prop:"companyName"}},[t.isEditObj["companyName"]?[a("el-input",{attrs:{placeholder:"请输入公司名称"},model:{value:t.form.companyName,callback:function(e){t.$set(t.form,"companyName",e)},expression:"form.companyName"}})]:[a("span",[t._v(t._s(t.form.companyName||"无"))])]],2),t._v(" "),a("el-form-item",{attrs:{label:"详细地址",prop:"companyAddress"}},[t.isEditObj["companyAddress"]?[null==t.form.companyAddress||""==t.form.companyAddress?a("el-autocomplete",{staticStyle:{"margin-bottom":"15px"},attrs:{placeholder:"请定位公司地址","prefix-icon":"el-icon-search","fetch-suggestions":t.querySearchLocationAsync},on:{select:t.addressAdviceSelect},model:{value:t.addressInput,callback:function(e){t.addressInput=e},expression:"addressInput"}}):a("el-tag",{staticStyle:{"margin-bottom":"15px"},attrs:{closable:""},on:{close:t.handleTagClose}},[t._v(t._s(t.form.companyAddress))]),t._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"点击进行定位",placement:"top-start"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-location-outline"},on:{click:t.getLocation}})],1),t._v(" "),a("span",{staticClass:"input-tips"},[t._v("自动定位不准或无法定位时请手动搜索地址")]),t._v(" "),a("br")]:[a("span",[t._v(t._s(t.form.companyAddress||"无"))])]],2),t._v(" "),t._l(t.companyOptions,(function(e){return a("el-form-item",{key:e.name,attrs:{label:e.label,prop:e.name}},[a("el-checkbox-group",{attrs:{disabled:!t.isEditObj[e.name]},model:{value:t.form[e.name],callback:function(a){t.$set(t.form,e.name,a)},expression:"form[option.name]"}},t._l(e.value,(function(e){return a("el-checkbox",{key:e,attrs:{label:e}},[t._v(t._s(e))])})),1),t._v(" "),t.isEditObj[e.name]?void 0:t._e()],2)}))],t._v(" "),a("div",[a("el-button",{staticClass:"submit-btn",attrs:{disabled:!t.isEdit,icon:t.isLoading?"el-icon-loading":"",type:"primary"},on:{click:function(e){return t.handleModify("form")}}},[t._v("提交")])],1)],2)],1)},o=[],i=a("db72"),n=(a("28a5"),a("7f7f"),a("ac6a"),a("3620")),r=a("ed08"),c=a("274e"),m=(a("0644"),a("c24f")),d=a("bc3a"),l=a.n(d),p="a4d407ac14f869095063169e1fccfb93",u={components:{DistrictSelect:c["a"]},data:function(){return{companyOptions:n["a"],addressInput:"",isLoading:!1,administrativDivision:{},isEdit:!1,isEditObj:{companyTypes:!1,businessFields:!1,contact:!1,companyName:!1,companyAddress:!1},form:this.$store.getters.userInfo,rules:{contact:[{required:!0,message:"请输入联系方式",trigger:"blur"}],companyAddress:[{required:!0,message:"请输入公司地址",trigger:"blur"}],companyTypes:[{required:!0,message:"至少选择一个",trigger:"change"}],businessFields:[{required:!0,message:"至少选择一个",trigger:"change"}],companyName:[{required:!0,message:"请输入公司名称",trigger:"blur"},{min:1,max:25,message:"长度在 1 到 20 个字符",trigger:"blur"}]}}},created:function(){"company"!=this.form.userType&&(this.form.companyTypes=[],this.form.businessFields=[])},watch:{"form.companyAddress":function(t,e){t||(this.administrativDivision={},this.form.companyLocation=[])}},methods:{querySearchLocationAsync:function(t,e){t&&l.a.get("https://restapi.amap.com/v3/assistant/inputtips?key=".concat(p,"&keywords=").concat(t)).then((function(t){if(1==t.data.status){var a=t.data.tips,s=[];a.forEach((function(t){s.push({value:t.district+t.address+t.name,location:t.location,administrativDivision:Object(r["a"])(t.district)})})),e(s)}}))},addressAdviceSelect:function(t){this.form.companyAddress=t.value,this.form.companyLat=t.location.split(",")[1],this.form.companyLon=t.location.split(",")[0],this.form.province=t.administrativDivision.province,this.form.city=t.administrativDivision.city,this.form.district=t.administrativDivision.district},getLocation:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(this.showPosition,this.locationError)},showPosition:function(t){var e=this,a=t.coords;l.a.get("https://restapi.amap.com/v3/geocode/regeo?key=".concat(p,"&location=").concat(a.longitude,",").concat(a.latitude)).then((function(t){if(1==t.data.status){var s=t.data.regeocode;e.form.companyAddress=s.formatted_address,e.form.province=s.addressComponent.province,e.form.city=s.addressComponent.city,e.form.district=s.addressComponent.district,e.addressInput="",e.form.companyLat=a.latitude,e.form.companyLon=a.longitude}}))},locationError:function(t){switch(t.code){case t.PERMISSION_DENIED:this.$message.error("您拒绝获取位置信息，请修改浏览器设置或手动输入地址！");break;case t.POSITION_UNAVAILABLE:this.$message.error("无法获取位置，请手动输入地址！");break;case t.TIMEOUT:this.$message.error("获取位置超时，请手动输入地址！");break;case t.UNKNOWN_ERROR:this.$message.error("定位失败，请手动输入地址！");break}},handleTagClose:function(){this.form.companyAddress="",this.addressInput="",this.form.companyLat="",this.form.companyLon=""},handleModify:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;delete e.form.password,e.isLoading=!0,Object(m["g"])(Object(i["a"])({},e.form,{},e.administrativDivision)).then((function(t){-1!=t.code?1==t.code&&(e.$store.commit("user/UPDATE_USERINFO",e.form),e.bindCompany(!1),e.isLoading=!1):e.isLoading=!1}))}))},bindCompany:function(t){for(var e in this.form.userType="company",this.isEditObj)this.isEditObj[e]=t;this.isEdit=t}}},f=u,v=(a("e02e"),a("e5c2"),a("2877")),y=Object(v["a"])(f,s,o,!1,null,"a9a8f544",null);e["default"]=y.exports},6895:function(t,e,a){},a274:function(t,e,a){},e02e:function(t,e,a){"use strict";var s=a("6895"),o=a.n(s);o.a},e5c2:function(t,e,a){"use strict";var s=a("a274"),o=a.n(s);o.a}}]);