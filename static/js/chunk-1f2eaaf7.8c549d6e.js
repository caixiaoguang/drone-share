(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1f2eaaf7"],{"0649":function(e,t,i){},"0c83":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("common-filter",{attrs:{filterType:"drivers"}})},r=[],n=i("af31"),o={components:{CommonFilter:n["a"]}},s=o,l=(i("e6be"),i("2877")),p=Object(l["a"])(s,a,r,!1,null,null,null);t["default"]=p.exports},"14e4":function(e,t,i){"use strict";var a=i("972b"),r=i.n(a);r.a},3931:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"map-container"},[i("l-map",{attrs:{zoom:e.zoom,"max-zoom":32,center:e.center,options:e.options},on:{ready:e.mapReady}},[e._t("default"),e._v(" "),i("l-control-layers",{attrs:{collapsed:!0,"sort-layers":!0},on:{ready:e.layerControlReady}}),e._v(" "),i("l-feature-group",{attrs:{"layer-type":"base",name:"天地图"}},e._l(e.tianditu,(function(e){return i("l-tile-layer",{key:e.name,attrs:{url:e.url,visible:e.visible}})})),1),e._v(" "),i("l-tile-layer",{attrs:{name:"影像图","layer-type":"base",visible:!1,url:e.satellite.url}})],2)],1)},r=[],n=i("2699"),o=i("9ee8"),s=i("a40a"),l=i("c5ca"),p=i("044a"),c=i("2b0e"),u={props:{isMain:{type:Boolean,default:!1}},components:{LMap:n["a"],LControlLayers:o["a"],LTileLayer:s["a"],LFeatureGroup:l["a"],LGeoJson:p["a"]},data:function(){return{zoom:9,center:[26.51,106.62],options:{attributionControl:!1,preferCanvas:!0},tianditu:[{name:"tianditu",visible:!0,url:"https://t0.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=1902c209c7a7480dfb962751b839b91e"},{name:"tianditu_label",visible:!0,url:"https://t0.tianditu.gov.cn/cva_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=1902c209c7a7480dfb962751b839b91e"}],satellite:{name:"satellite",url:"https://t2.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=1902c209c7a7480dfb962751b839b91e"}}},methods:{mapReady:function(e){this.isMain&&(c["default"].prototype.$map=e),this.$emit("mapReady",e)},layerControlReady:function(e){this.isMain&&(c["default"].prototype.$layerControl=e)}}},f=u,d=(i("14e4"),i("2877")),v=Object(d["a"])(f,a,r,!1,null,"601753f7",null);t["a"]=v.exports},"972b":function(e,t,i){},"9b86":function(e,t,i){"use strict";var a=i("da7c"),r=i.n(a);r.a},af31:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"dashboard-container"},[i("main-map",{staticClass:"map-com",on:{mapReady:e.mapReady}},[void 0],2),e._v(" "),i("div",{staticClass:"info-list"},[e._m(0),e._v(" "),i("el-form",{attrs:{size:"mini","label-position":"right"}},[i("el-form-item",{staticClass:"mb10"},[i("el-radio-group",{on:{change:e.queryInfo},model:{value:e.infoType,callback:function(t){e.infoType=t},expression:"infoType"}},[i("el-radio-button",{attrs:{label:"supplyInfo"}},[i("svg-icon",{attrs:{"icon-class":"供应"}}),e._v("供应信息\n          ")],1),e._v(" "),i("el-radio-button",{attrs:{label:"demandInfo"}},[i("svg-icon",{attrs:{"icon-class":"需求"}}),e._v("需求信息\n          ")],1)],1)],1),e._v(" "),e._l(e.filterOption,(function(t){return i("el-form-item",{key:t.prop,attrs:{label:t.label,"label-width":"85px"}},[i("el-select",{attrs:{clearable:""},model:{value:e.form[e.filterType][t.prop],callback:function(i){e.$set(e.form[e.filterType],t.prop,i)},expression:"form[filterType][option.prop]"}},e._l(t.content.options,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)})),e._v(" "),i("district-select",{attrs:{labelWidth:"85px"},model:{value:e.administrativDivision,callback:function(t){e.administrativDivision=t},expression:"administrativDivision"}}),e._v(" "),i("div",{staticClass:"filter-btn"},[i("el-button",{attrs:{type:"primary",size:"small",icon:e.isLoading?"el-icon-loading":""},on:{click:e.queryInfo}},[e._v("查询")])],1)],2),e._v(" "),i("div",{staticClass:"result-list"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],attrs:{data:e.relustList,size:"mini",height:"100%"},on:{"row-click":e.rowClick}},[e.isSupplyDroneOrDriver?e._e():i("el-table-column",{attrs:{prop:"name",label:"名称"}}),e._v(" "),i("el-table-column",{attrs:{label:"位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row["province"]+t.row["city"]||""+t.row["district"]||""))]}}])}),e._v(" "),e._l(e.filterFields,(function(t){return i("el-table-column",{key:t.prop,attrs:{label:t.label,width:"area"==t.prop?"45px":""},scopedSlots:e._u([{key:"default",fn:function(i){return[e._v(e._s(i.row[t.prop]))]}}],null,!0)})})),e._v(" "),i("el-table-column",{attrs:{label:"发布人"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row["companyName"]||t.row["username"]))]}}])}),e._v(" "),i("el-table-column",{attrs:{label:"联系方式"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.token?i("span",[e._v(e._s(t.row["contact"]))]):i("span",[e._v("登陆后查看")])]}}])})],2)],1),e._v(" "),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes,total","page-size":e.pageSize,"page-sizes":[10,15,20,30],"current-page":e.page,total:e.total,size:"mini"},on:{"size-change":e.queryInfo,"current-change":e.queryInfo}})],1)],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"title"},[i("i",{staticClass:"el-icon-tickets"}),e._v(" 供需信息列表\n    ")])}],n=(i("7f7f"),i("ac6a"),i("db72")),o=i("3620"),s=i("274e"),l=i("c24f"),p=i("3931"),c=i("044a"),u=i("2f62"),f=o["c"].slice(1,o["c"].length),d=o["b"].slice(1,o["b"].length),v={drones:f,drivers:d,airspace:[],aerialData:[o["d"][0],{prop:"area",label:"面积"},{prop:"date",label:"拍摄日期"},{prop:"resolution",label:"分辨率"},{prop:"precision",label:"精度"}]},y={props:{filterType:String},components:{DistrictSelect:s["a"],MainMap:p["a"],LGeoJson:c["a"]},data:function(){return{infoType:"supplyInfo",isLoading:!1,form:{aerialData:{aerialDataType:"正射影像"},businessFields:"应急",drones:{droneType:"多旋翼",droneUsage:"地理测绘"},drivers:{driverLicenceSource:"AOPA",driverType:"多旋翼",grade:"一",driverGrade:"视距内等级"}},administrativDivision:"",page:1,pageSize:10,total:0,relustList:[]}},created:function(){this.queryInfo()},computed:Object(n["a"])({},Object(u["b"])(["token"]),{isSupplyDroneOrDriver:function(){var e="supplyInfo"==this.infoType;return e&&"drones"==this.filterType||e&&"drivers"==this.filterType},filterOption:function(){var e=this;return"aerialData"==this.filterType?o["d"].filter((function(e){return"aerialDataType"==e.prop})):"businessFields"==this.filterType?o["d"].filter((function(t){return t.prop==e.filterType})):"drones"==this.filterType?o["c"].filter((function(e){return"droneMaker"!=e.prop&&"buyTime"!=e.prop&&"isSale"!=e.prop&&"maxLoad"!=e.prop&&"index"!=e.type})):"drivers"==this.filterType?o["b"].filter((function(e){return"index"!=e.type})):void 0},filterFields:function(){return"drones"==this.filterType&&"demandInfo"==this.infoType?v[this.filterType].filter((function(e){return"buyTime"!=e.prop&&"droneMaker"!=e.prop&&"maxLoad"!=e.prop})):v[this.filterType]},airspaceGeoList:function(){if("airspace"==this.filterType&&"supplyInfo"==this.infoType)return this.relustList.filter((function(e){return Boolean(e.region)}))}}),methods:{queryInfo:function(){var e=this;this.isLoading=!0,delete this.administrativDivision.centerLat,delete this.administrativDivision.centerLon,this.isSupplyDroneOrDriver?this.getCompanyList():Object(l["a"])(this.page,this.pageSize,Object(n["a"])({},this.form[this.filterType],{},this.administrativDivision,{type:this.infoType,releaseType:this.filterType})).then((function(t){e.formatData(t.datas)}))},getCompanyList:function(){var e=this;Object(l["b"])(this.page,this.pageSize,Object(n["a"])({},this.form[this.filterType],{},this.administrativDivision)).then((function(t){var i=t.datas;i.datas.forEach((function(t){for(var i in t[e.filterType][0])t[i]=t[e.filterType][0][i]})),e.isLoading=!1,e.relustList=i.datas,e.addGeo(),e.total=i.total}))},formatData:function(e){var t=this;this.isLoading=!1,"drones"!=this.filterType&&"drivers"!=this.filterType||e.datas.forEach((function(e){for(var i in e[t.filterType][0])e[i]=e[t.filterType][0][i]})),e.datas.forEach((function(e){for(var t in e["userInfo"])e[t]=e["userInfo"][t]})),this.relustList=e.datas,this.addGeo(),this.total=e.total},rowClick:function(e){e.region&&this.$map.fitBounds(e.$bounds)},addGeo:function(){var e=this;this.$featureGroup?this.$featureGroup.clearLayers():(this.$featureGroup=L.featureGroup(),this.$featureGroup.addTo(this.$map)),this.relustList.forEach((function(t){if(t.region){var i=L.geoJSON(JSON.parse(t.region)).bindTooltip(t.name);t.$bounds=i.getBounds(),e.$featureGroup.addLayer(i)}}))},mapReady:function(e){this.$map=e}}},m=y,b=(i("9b86"),i("2877")),h=Object(b["a"])(m,a,r,!1,null,"4ee3ed80",null);t["a"]=h.exports},da7c:function(e,t,i){},e6be:function(e,t,i){"use strict";var a=i("0649"),r=i.n(a);r.a}}]);