(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-753bb996"],{"14e4":function(t,e,n){"use strict";var i=n("972b"),a=n.n(i);a.a},"28b1":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard-container"},[n("main-map",{staticClass:"map-com"},["supplyInfo"==t.infoType?t._l(t.companyListHasLatlon,(function(e){return n("l-marker",{key:e.companyName,attrs:{"lat-lng":[e.companyLat,e.companyLon]}},[n("l-tooltip",[t._v(t._s(e.companyName))])],1)})):t._e()],2),t._v(" "),n("div",{staticClass:"info-list"},[t._m(0),t._v(" "),n("el-form",{attrs:{size:"mini"}},[n("el-form-item",{staticClass:"mb10"},[n("el-radio-group",{on:{change:t.getCompany},model:{value:t.infoType,callback:function(e){t.infoType=e},expression:"infoType"}},[n("el-radio-button",{attrs:{label:"supplyInfo"}},[n("svg-icon",{attrs:{"icon-class":"供应"}}),t._v("供应信息\n          ")],1),t._v(" "),n("el-radio-button",{attrs:{label:"demandInfo"}},[n("svg-icon",{attrs:{"icon-class":"需求"}}),t._v("需求信息\n          ")],1)],1)],1),t._v(" "),"supplyInfo"==t.infoType?[n("el-form-item",{staticClass:"company-filter"},[n("el-tabs",{attrs:{type:"border-card"}},t._l(t.companyOptions,(function(e){return n("el-tab-pane",{key:e.name},[n("span",{attrs:{slot:"label"},slot:"label"},[n("el-badge",{staticClass:"item",attrs:{value:t.companyFilterForm[e.name].length,type:"primary"}},[t._v(t._s(e.label))])],1),t._v(" "),n("el-checkbox",{model:{value:t.checkAll[e.name],callback:function(n){t.$set(t.checkAll,e.name,n)},expression:"checkAll[property.name]"}},[t._v("全选")]),t._v(" "),n("el-checkbox-group",{on:{change:t.handleChange},model:{value:t.companyFilterForm[e.name],callback:function(n){t.$set(t.companyFilterForm,e.name,n)},expression:"companyFilterForm[property.name]"}},t._l(e.value,(function(t){return n("el-checkbox",{key:t,attrs:{label:t}})})),1)],1)})),1)],1)]:n("el-form-item",{attrs:{label:"选择类型","label-width":"80px"}},[n("el-select",{model:{value:t.demandType,callback:function(e){t.demandType=e},expression:"demandType"}},t._l(t.companyOptions[1].value,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1),t._v(" "),n("district-select",{attrs:{labelWidth:"80px"},model:{value:t.administrativDivision,callback:function(e){t.administrativDivision=e},expression:"administrativDivision"}}),t._v(" "),n("div",{staticClass:"filter-btn"},[n("el-button",{attrs:{type:"primary",size:"small",icon:t.isLoading?"el-icon-loading":""},on:{click:t.getCompany}},[t._v("查询")])],1)],2),t._v(" "),n("div",{staticClass:"result-list"},["supplyInfo"==t.infoType?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"company-list-container"},t._l(t.companyList,(function(e){return n("el-card",{key:e.companyName,staticClass:"company-list",attrs:{shadow:"hover"}},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v(t._s(e.companyName))])]),t._v(" "),n("div",[t._v("\n            地址:\n            "),n("el-button",{attrs:{type:"text"}},[t._v(t._s(e.companyAddress))])],1),t._v(" "),n("div",[t._v("\n            联系方式:\n            "),t.token?n("el-button",{attrs:{type:"text"}},[t._v(t._s(e.contact))]):n("el-button",{attrs:{type:"text"}},[t._v("请登陆后查看")])],1),t._v(" "),n("el-collapse",{attrs:{accordion:""}},[n("el-collapse-item",[n("template",{slot:"title"},[n("span",{staticClass:"main-color"},[t._v("公司属性")])]),t._v(" "),n("div",{staticStyle:{display:"flex","margin-top":"7px"}},[n("div",[t._v("公司类型：")]),t._v(" "),n("div",t._l(e.companyTypes,(function(e){return n("el-tag",{key:e,attrs:{size:"mini"}},[t._v(t._s(e))])})),1)]),t._v(" "),n("div",{staticStyle:{display:"flex","margin-top":"7px"}},[n("div",[t._v("业务范围：")]),t._v(" "),n("div",t._l(e.businessFields,(function(e){return n("el-tag",{key:e,attrs:{size:"mini"}},[t._v(t._s(e))])})),1)])],2)],1)],1)})),1):n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{data:t.projectList,size:"mini",height:"100%"}},[n("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),n("el-table-column",{attrs:{prop:"businessFields",label:"类型",width:"50px"}}),t._v(" "),n("el-table-column",{attrs:{prop:"area",label:"面积",width:"45px"}}),t._v(" "),n("el-table-column",{attrs:{label:"位置"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row["province"]+e.row["city"]||""+e.row["district"]||""))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"发布人"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.userInfo.username))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"联系方式"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.token?n("span",[t._v(t._s(e.row.userInfo.contact))]):n("span",[t._v("登陆查看")])]}}])})],1),t._v(" "),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes,total","page-size":t.pageSize,"page-sizes":[10,15,20,30],"current-page":t.page,total:t.total,size:"mini"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("i",{staticClass:"el-icon-tickets"}),t._v(" 供需信息列表\n    ")])}],o=n("db72"),s=(n("7f7f"),n("7514"),n("ac6a"),n("2f62")),r=n("3931"),l=n("e11e"),c=function(t,e){var n;return function(){var i=[],a=arguments.length;while(a--)i[a]=arguments[a];var o=this;n&&clearTimeout(n),n=setTimeout((function(){t.apply(o,i),n=null}),e)}},p=function(t){return t&&"function"===typeof t.charAt?t.charAt(0).toUpperCase()+t.slice(1):t},u=function(t,e,n,i){var a=function(i){var a="set"+p(i),o=n[i].type===Object||n[i].type===Array||Array.isArray(n[i].type);n[i].custom&&t[a]?t.$watch(i,(function(e,n){t[a](e,n)}),{deep:o}):"setOptions"===a?t.$watch(i,(function(t,n){Object(l["setOptions"])(e,t)}),{deep:o}):e[a]&&t.$watch(i,(function(t,n){e[a](t)}),{deep:o})};for(var o in n)a(o)},d=function(t){var e={};for(var n in t){var i=t[n];null!==i&&void 0!==i&&(e[n]=i)}return e},f=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var i=d(n);t=d(t);var a=e.$options.props;for(var o in t){var s=a[o]?a[o].default:Symbol("unique");i[o]&&s!==t[o]?(console.warn(o+" props is overriding the value passed in the options props"),i[o]=t[o]):i[o]||(i[o]=t[o])}return i},m=function(t){var e=!1;while(t&&!e)void 0===t.mapObject?t=t.$parent:e=!0;return t},v={props:{pane:{type:String,default:"overlayPane"},attribution:{type:String,default:null},name:{type:String,custom:!0,default:void 0},layerType:{type:String,custom:!0,default:void 0},visible:{type:Boolean,custom:!0,default:!0}},mounted:function(){this.layerOptions={attribution:this.attribution,pane:this.pane}},beforeDestroy:function(){this.unbindPopup(),this.unbindTooltip(),this.parentContainer.removeLayer(this)},methods:{setAttribution:function(t,e){var n=this.$parent.mapObject.attributionControl;n.removeAttribution(e).addAttribution(t)},setName:function(){this.parentContainer.removeLayer(this),this.visible&&this.parentContainer.addLayer(this)},setLayerType:function(){this.parentContainer.removeLayer(this),this.visible&&this.parentContainer.addLayer(this)},setVisible:function(t){this.mapObject&&(t?this.parentContainer.addLayer(this):this.parentContainer.hideLayer?this.parentContainer.hideLayer(this):this.parentContainer.removeLayer(this))},unbindTooltip:function(){var t=this.mapObject?this.mapObject.getTooltip():null;t&&t.unbindTooltip()},unbindPopup:function(){var t=this.mapObject?this.mapObject.getPopup():null;t&&t.unbindPopup()},updateVisibleProp:function(t){this.$emit("update:visible",t)}}},h={props:{options:{type:Object,default:function(){return{}}}}},y={name:"LMarker",mixins:[v,h],props:{pane:{type:String,default:"markerPane"},draggable:{type:Boolean,custom:!0,default:!1},latLng:{type:[Object,Array],custom:!0,default:null},icon:{type:[Object],custom:!1,default:function(){return new l["Icon"].Default}},zIndexOffset:{type:Number,custom:!1,default:null}},data:function(){return{ready:!1}},mounted:function(){var t=this,e=f(Object.assign({},this.layerOptions,{icon:this.icon,zIndexOffset:this.zIndexOffset,draggable:this.draggable}),this);this.mapObject=Object(l["marker"])(this.latLng,e),l["DomEvent"].on(this.mapObject,this.$listeners),this.mapObject.on("move",c(this.latLngSync,100)),u(this,this.mapObject,this.$options.props),this.parentContainer=m(this.$parent),this.parentContainer.addLayer(this,!this.visible),this.ready=!0,this.$nextTick((function(){t.$emit("ready",t.mapObject)}))},methods:{setDraggable:function(t,e){this.mapObject.dragging&&(t?this.mapObject.dragging.enable():this.mapObject.dragging.disable())},setLatLng:function(t){if(null!=t&&this.mapObject){var e=this.mapObject.getLatLng(),n=Object(l["latLng"])(t);n.lat===e.lat&&n.lng===e.lng||this.mapObject.setLatLng(n)}},latLngSync:function(t){this.$emit("update:latLng",t.latlng),this.$emit("update:lat-lng",t.latlng)}},render:function(t){return this.ready&&this.$slots.default?t("div",{style:{display:"none"}},this.$slots.default):null}};function b(t,e,n,i,a,o,s,r,l,c){"boolean"!==typeof s&&(l=r,r=s,s=!1);var p,u="function"===typeof n?n.options:n;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,a&&(u.functional=!0)),i&&(u._scopeId=i),o?(p=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=p):e&&(p=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),p)if(u.functional){var d=u.render;u.render=function(t,e){return p.call(e),d(t,e)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,p):[p]}return n}"undefined"!==typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var g=y,_=void 0,T=void 0,L=void 0,O=void 0,C=b({},_,g,T,O,L,!1,void 0,void 0,void 0),k=C,S=function(t){return t&&"function"===typeof t.charAt?t.charAt(0).toUpperCase()+t.slice(1):t},j=function(t,e,n,i){var a=function(i){var a="set"+S(i),o=n[i].type===Object||n[i].type===Array||Array.isArray(n[i].type);n[i].custom&&t[a]?t.$watch(i,(function(e,n){t[a](e,n)}),{deep:o}):"setOptions"===a?t.$watch(i,(function(t,n){Object(l["setOptions"])(e,t)}),{deep:o}):e[a]&&t.$watch(i,(function(t,n){e[a](t)}),{deep:o})};for(var o in n)a(o)},$=function(t){var e={};for(var n in t){var i=t[n];null!==i&&void 0!==i&&(e[n]=i)}return e},w=function(t,e){var n=e.options&&e.options.constructor===Object?e.options:{};t=t&&t.constructor===Object?t:{};var i=$(n);t=$(t);var a=e.$options.props;for(var o in t){var s=a[o]?a[o].default:Symbol("unique");i[o]&&s!==t[o]?(console.warn(o+" props is overriding the value passed in the options props"),i[o]=t[o]):i[o]||(i[o]=t[o])}return i},E=function(t){var e=!1;while(t&&!e)void 0===t.mapObject?t=t.$parent:e=!0;return t},x={props:{content:{type:String,default:null,custom:!0}},mounted:function(){this.popperOptions={}},methods:{setContent:function(t){this.mapObject&&null!==t&&void 0!==t&&this.mapObject.setContent(t)}},render:function(t){return this.$slots.default?t("div",this.$slots.default):null}},I={props:{options:{type:Object,default:function(){return{}}}}},R={name:"LTooltip",mixins:[x,I],mounted:function(){var t=this,e=w(this.popperOptions,this);this.mapObject=Object(l["tooltip"])(e),l["DomEvent"].on(this.mapObject,this.$listeners),j(this,this.mapObject,this.$options.props),this.mapObject.setContent(this.content||this.$el),this.parentContainer=E(this.$parent),this.parentContainer.mapObject.bindTooltip(this.mapObject),this.$nextTick((function(){t.$emit("ready",t.mapObject)}))},beforeDestroy:function(){this.parentContainer&&(this.parentContainer.unbindTooltip?this.parentContainer.unbindTooltip():this.parentContainer.mapObject&&this.parentContainer.mapObject.unbindTooltip&&this.parentContainer.mapObject.unbindTooltip())}};function F(t,e,n,i,a,o,s,r,l,c){"boolean"!==typeof s&&(l=r,r=s,s=!1);var p,u="function"===typeof n?n.options:n;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,a&&(u.functional=!0)),i&&(u._scopeId=i),o?(p=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=p):e&&(p=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,r(t))}),p)if(u.functional){var d=u.render;u.render=function(t,e){return p.call(e),d(t,e)}}else{var f=u.beforeCreate;u.beforeCreate=f?[].concat(f,p):[p]}return n}"undefined"!==typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var z=R,A=void 0,D=void 0,M=void 0,N=void 0,G=F({},A,z,D,N,M,!1,void 0,void 0,void 0),V=G,W=n("3620"),U=n("274e"),X=n("af31"),q=n("c24f"),B={name:"Company",components:{MainMap:r["a"],DistrictSelect:U["a"],CommonFilter:X["a"],LMarker:k,LTooltip:V},data:function(){return{companyOptions:W["a"],isLoading:!1,infoType:"supplyInfo",companyFilterForm:{companyTypes:[],businessFields:[]},checkAll:{companyTypes:!0,businessFields:!0},demandType:"应急",administrativDivision:"",companyList:[],projectList:[],page:1,pageSize:10,total:0,isLogin:""!=this.$store.getters.token}},created:function(){var t=this;this.unWatch=this.$watch("administrativDivision",(function(){t.getCompany()}))},watch:{checkAll:{handler:function(t){var e=this;["companyTypes","businessFields"].forEach((function(n){t[n]?e.companyFilterForm[n]=e.companyOptions.find((function(t){return t.name==n})).value:e.companyFilterForm[n].length==e.companyOptions.find((function(t){return t.name==n})).value.length&&(e.companyFilterForm[n]=[])}))},deep:!0,immediate:!0},companyFilterForm:{handler:function(t){var e=this;["companyTypes","businessFields"].forEach((function(n){e.checkAll[n]=t[n].length==e.companyOptions.find((function(t){return t.name==n})).value.length}))},deep:!0}},computed:Object(o["a"])({},Object(s["b"])(["token"]),{companyListHasLatlon:function(){return this.companyList.filter((function(t){return Boolean(t.companyLat)&&Boolean(t.companyLon)}))}}),methods:{getCompany:function(){var t=this;this.isLoading=!0,"supplyInfo"==this.infoType?Object(q["b"])(this.page,this.pageSize,Object(o["a"])({},this.companyFilterForm,{},this.administrativDivision)).then((function(e){t.isLoading=!1,1==e.code&&(t.unWatch&&t.unWatch(),t.total=e.datas.total,t.companyList=e.datas.datas.filter((function(t){return""!=t.companyName||null!=t.companyName})))})).catch((function(e){t.isLoading=!1})):Object(q["a"])(this.page,this.pageSize,{businessFields:this.demandType,type:this.infoType}).then((function(e){t.isLoading=!1,1==e.code&&(t.total=e.datas.total,t.projectList=e.datas.datas)})).catch((function(){t.isLoading=!1}))},handleChange:function(t){},handleSizeChange:function(){this.getCompany()},handleCurrentChange:function(){this.getCompany()}}},P=B,J=(n("8f5f"),n("86d3"),n("2877")),Y=Object(J["a"])(P,i,a,!1,null,"6e208b2e",null);e["default"]=Y.exports},3931:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map-container"},[n("l-map",{attrs:{zoom:t.zoom,"max-zoom":32,center:t.center,options:t.options},on:{ready:t.mapReady}},[t._t("default"),t._v(" "),n("l-control-layers",{attrs:{collapsed:!0,"sort-layers":!0},on:{ready:t.layerControlReady}}),t._v(" "),n("l-feature-group",{attrs:{"layer-type":"base",name:"天地图"}},t._l(t.tianditu,(function(t){return n("l-tile-layer",{key:t.name,attrs:{url:t.url,visible:t.visible}})})),1),t._v(" "),n("l-tile-layer",{attrs:{name:"影像图","layer-type":"base",visible:!1,url:t.satellite.url}})],2)],1)},a=[],o=n("2699"),s=n("9ee8"),r=n("a40a"),l=n("c5ca"),c=n("044a"),p=n("2b0e"),u={props:{isMain:{type:Boolean,default:!1}},components:{LMap:o["a"],LControlLayers:s["a"],LTileLayer:r["a"],LFeatureGroup:l["a"],LGeoJson:c["a"]},data:function(){return{zoom:9,center:[26.51,106.62],options:{attributionControl:!1,preferCanvas:!0},tianditu:[{name:"tianditu",visible:!0,url:"https://t0.tianditu.gov.cn/vec_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=1902c209c7a7480dfb962751b839b91e"},{name:"tianditu_label",visible:!0,url:"https://t0.tianditu.gov.cn/cva_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=cva&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=1902c209c7a7480dfb962751b839b91e"}],satellite:{name:"satellite",url:"https://t2.tianditu.gov.cn/img_w/wmts?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles&TILECOL={x}&TILEROW={y}&TILEMATRIX={z}&tk=1902c209c7a7480dfb962751b839b91e"}}},methods:{mapReady:function(t){this.isMain&&(p["default"].prototype.$map=t),this.$emit("mapReady",t)},layerControlReady:function(t){this.isMain&&(p["default"].prototype.$layerControl=t)}}},d=u,f=(n("14e4"),n("2877")),m=Object(f["a"])(d,i,a,!1,null,"601753f7",null);e["a"]=m.exports},"86d3":function(t,e,n){"use strict";var i=n("b698"),a=n.n(i);a.a},"8f5f":function(t,e,n){"use strict";var i=n("bd37"),a=n.n(i);a.a},"972b":function(t,e,n){},"9b86":function(t,e,n){"use strict";var i=n("da7c"),a=n.n(i);a.a},af31:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dashboard-container"},[n("main-map",{staticClass:"map-com",on:{mapReady:t.mapReady}},[void 0],2),t._v(" "),n("div",{staticClass:"info-list"},[t._m(0),t._v(" "),n("el-form",{attrs:{size:"mini","label-position":"right"}},[n("el-form-item",{staticClass:"mb10"},[n("el-radio-group",{on:{change:t.queryInfo},model:{value:t.infoType,callback:function(e){t.infoType=e},expression:"infoType"}},[n("el-radio-button",{attrs:{label:"supplyInfo"}},[n("svg-icon",{attrs:{"icon-class":"供应"}}),t._v("供应信息\n          ")],1),t._v(" "),n("el-radio-button",{attrs:{label:"demandInfo"}},[n("svg-icon",{attrs:{"icon-class":"需求"}}),t._v("需求信息\n          ")],1)],1)],1),t._v(" "),t._l(t.filterOption,(function(e){return n("el-form-item",{key:e.prop,attrs:{label:e.label,"label-width":"85px"}},[n("el-select",{attrs:{clearable:""},model:{value:t.form[t.filterType][e.prop],callback:function(n){t.$set(t.form[t.filterType],e.prop,n)},expression:"form[filterType][option.prop]"}},t._l(e.content.options,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)})),t._v(" "),n("district-select",{attrs:{labelWidth:"85px"},model:{value:t.administrativDivision,callback:function(e){t.administrativDivision=e},expression:"administrativDivision"}}),t._v(" "),n("div",{staticClass:"filter-btn"},[n("el-button",{attrs:{type:"primary",size:"small",icon:t.isLoading?"el-icon-loading":""},on:{click:t.queryInfo}},[t._v("查询")])],1)],2),t._v(" "),n("div",{staticClass:"result-list"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],attrs:{data:t.relustList,size:"mini",height:"100%"},on:{"row-click":t.rowClick}},[t.isSupplyDroneOrDriver?t._e():n("el-table-column",{attrs:{prop:"name",label:"名称"}}),t._v(" "),n("el-table-column",{attrs:{label:"位置"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row["province"]+e.row["city"]||""+e.row["district"]||""))]}}])}),t._v(" "),t._l(t.filterFields,(function(e){return n("el-table-column",{key:e.prop,attrs:{label:e.label,width:"area"==e.prop?"45px":""},scopedSlots:t._u([{key:"default",fn:function(n){return[t._v(t._s(n.row[e.prop]))]}}],null,!0)})})),t._v(" "),n("el-table-column",{attrs:{label:"发布人"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row["companyName"]||e.row["username"]))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"联系方式"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.token?n("span",[t._v(t._s(e.row["contact"]))]):n("span",[t._v("登陆后查看")])]}}])})],2)],1),t._v(" "),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes,total","page-size":t.pageSize,"page-sizes":[10,15,20,30],"current-page":t.page,total:t.total,size:"mini"},on:{"size-change":t.queryInfo,"current-change":t.queryInfo}})],1)],1)},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"title"},[n("i",{staticClass:"el-icon-tickets"}),t._v(" 供需信息列表\n    ")])}],o=(n("7f7f"),n("ac6a"),n("db72")),s=n("3620"),r=n("274e"),l=n("c24f"),c=n("3931"),p=n("044a"),u=n("2f62"),d=s["c"].slice(1,s["c"].length),f=s["b"].slice(1,s["b"].length),m={drones:d,drivers:f,airspace:[],aerialData:[s["d"][0],{prop:"area",label:"面积"},{prop:"date",label:"拍摄日期"},{prop:"resolution",label:"分辨率"},{prop:"precision",label:"精度"}]},v={props:{filterType:String},components:{DistrictSelect:r["a"],MainMap:c["a"],LGeoJson:p["a"]},data:function(){return{infoType:"supplyInfo",isLoading:!1,form:{aerialData:{aerialDataType:"正射影像"},businessFields:"应急",drones:{droneType:"多旋翼",droneUsage:"地理测绘"},drivers:{driverLicenceSource:"AOPA",driverType:"多旋翼",grade:"一",driverGrade:"视距内等级"}},administrativDivision:"",page:1,pageSize:10,total:0,relustList:[]}},created:function(){this.queryInfo()},computed:Object(o["a"])({},Object(u["b"])(["token"]),{isSupplyDroneOrDriver:function(){var t="supplyInfo"==this.infoType;return t&&"drones"==this.filterType||t&&"drivers"==this.filterType},filterOption:function(){var t=this;return"aerialData"==this.filterType?s["d"].filter((function(t){return"aerialDataType"==t.prop})):"businessFields"==this.filterType?s["d"].filter((function(e){return e.prop==t.filterType})):"drones"==this.filterType?s["c"].filter((function(t){return"droneMaker"!=t.prop&&"buyTime"!=t.prop&&"isSale"!=t.prop&&"maxLoad"!=t.prop&&"index"!=t.type})):"drivers"==this.filterType?s["b"].filter((function(t){return"index"!=t.type})):void 0},filterFields:function(){return"drones"==this.filterType&&"demandInfo"==this.infoType?m[this.filterType].filter((function(t){return"buyTime"!=t.prop&&"droneMaker"!=t.prop&&"maxLoad"!=t.prop})):m[this.filterType]},airspaceGeoList:function(){if("airspace"==this.filterType&&"supplyInfo"==this.infoType)return this.relustList.filter((function(t){return Boolean(t.region)}))}}),methods:{queryInfo:function(){var t=this;this.isLoading=!0,delete this.administrativDivision.centerLat,delete this.administrativDivision.centerLon,this.isSupplyDroneOrDriver?this.getCompanyList():Object(l["a"])(this.page,this.pageSize,Object(o["a"])({},this.form[this.filterType],{},this.administrativDivision,{type:this.infoType,releaseType:this.filterType})).then((function(e){t.formatData(e.datas)}))},getCompanyList:function(){var t=this;Object(l["b"])(this.page,this.pageSize,Object(o["a"])({},this.form[this.filterType],{},this.administrativDivision)).then((function(e){var n=e.datas;n.datas.forEach((function(e){for(var n in e[t.filterType][0])e[n]=e[t.filterType][0][n]})),t.isLoading=!1,t.relustList=n.datas,t.addGeo(),t.total=n.total}))},formatData:function(t){var e=this;this.isLoading=!1,"drones"!=this.filterType&&"drivers"!=this.filterType||t.datas.forEach((function(t){for(var n in t[e.filterType][0])t[n]=t[e.filterType][0][n]})),t.datas.forEach((function(t){for(var e in t["userInfo"])t[e]=t["userInfo"][e]})),this.relustList=t.datas,this.addGeo(),this.total=t.total},rowClick:function(t){t.region&&this.$map.fitBounds(t.$bounds)},addGeo:function(){var t=this;this.$featureGroup?this.$featureGroup.clearLayers():(this.$featureGroup=L.featureGroup(),this.$featureGroup.addTo(this.$map)),this.relustList.forEach((function(e){if(e.region){var n=L.geoJSON(JSON.parse(e.region)).bindTooltip(e.name);e.$bounds=n.getBounds(),t.$featureGroup.addLayer(n)}}))},mapReady:function(t){this.$map=t}}},h=v,y=(n("9b86"),n("2877")),b=Object(y["a"])(h,i,a,!1,null,"4ee3ed80",null);e["a"]=b.exports},b698:function(t,e,n){},bd37:function(t,e,n){},da7c:function(t,e,n){}}]);